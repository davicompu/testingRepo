<div class="row">
    <div class="large-12 columns">
        <h4 class="view-heading">FUNDING REQUEST REPORT</h4>

        <div class="row">
            <div class="large-12 columns">
                <p>
                    <a href="/reportfile/fundingrequest">Download Excel version</a>
                </p>
            </div>
        </div>

        <div class="row">
            <div class="large-12 columns">
                <table class="tabular">
                    <thead>
                        <tr>
                            <th class="hide-for-small" data-bind="click: sort.bind($data, 'Number')">
                                Fund number</th>
                            <th data-bind="click: sort.bind($data, 'Title')">
                                Title</th>
                            <th class="hide-for-small" data-bind="click: sort.bind($data, 'ResponsiblePerson')">
                                Responsible person</th>
                            <th class="hide-for-small" data-bind="click: sort.bind($data, 'CurrentBudget')">
                                Current fiscal year approved budget</th>
                            <th class="hide-for-medium-down" data-bind="click: sort.bind($data, 'ProjectedExpenditures')">
                                Current fiscal year projected expenditures
                            </th>
                            <th data-bind="click: sort.bind($data, 'requestedBudget')">
                                Requested budget</th>
                            <th class="hide-for-small" data-bind="click: sort.bind($data, 'variance')">
                                Variance</th>
                        </tr>
                    </thead>
                    <!-- ko foreach: items -->
                    <tbody data-bind="ifnot: Number() === 'O'">
                        <tr>
                            <td colspan="7" class="text-center" data-bind="text: Name"></td>
                        </tr>
                        <!-- ko foreach: funds -->
                        <tr>
                            <td class="hide-for-small" data-bind="text: Number"></td>
                            <td data-bind="text: Title"></td>
                            <td class="hide-for-small" data-bind="text: ResponsiblePerson"></td>
                            <td class="hide-for-small" data-bind="text: formattedCurrentBudget, css: { 'negative-value': CurrentBudget() < 0 }"></td>
                            <td class="hide-for-medium-down" data-bind="text: formattedProjectedExpenditures, css: { 'negative-value': ProjectedExpenditures() < 0 }"></td>
                            <td data-bind="text: formattedRequestedBudget, css: { 'negative-value': requestedBudget() < 0 }"></td>
                            <td class="hide-for-small" data-bind="text: formattedVariance, css: { 'negative-value': variance() < 0 }"></td>
                        </tr>
                        <!--/ko-->
                    </tbody>
                    <tbody class="hide-for-small" data-bind="ifnot: Number() === 'O'">
                        <tr class="subtotal" data-bind="with: subtotals">
                            <td colspan="3" data-bind="text: 'Total for ' + $parent.Name()"></td>
                            <td data-bind="text: formattedCurrentBudget, css: { 'negative-value': currentBudget() < 0 }"></td>
                            <td class="hide-for-medium-down" data-bind="text: formattedProjectedExpenditures, css: { 'negative-value': projectedExpenditures() < 0 }"></td>
                            <td data-bind="text: formattedRequestedBudget, css: { 'negative-value': requestedBudget() < 0 }"></td>
                            <td data-bind="text: formattedVariance, css: { 'negative-value': variance() < 0 }"></td>
                        </tr>
                    </tbody>
                    <!--/ko-->
                    <tbody class="hide-for-small">
                        <tr class="grandtotal" data-bind="with: grandTotals">
                            <td colspan="3">Grand totals</td>
                            <td data-bind="text: formattedCurrentBudget, css: { 'negative-value': currentBudget() < 0 }"></td>
                            <td class="hide-for-medium-down" data-bind="text: formattedProjectedExpenditures, css: { 'negative-value': projectedExpenditures() < 0 }"></td>
                            <td data-bind="text: formattedRequestedBudget, css: { 'negative-value': requestedBudget() < 0 }"></td>
                            <td data-bind="text: formattedVariance, css: { 'negative-value': variance() < 0 }"></td>
                        </tr>
                    </tbody>
                    <!-- ko foreach: items -->
                    <tbody data-bind="if: Number() === 'O'">
                        <tr>
                            <td colspan="7" class="text-center" data-bind="text: Name"></td>
                        </tr>
                        <!-- ko foreach: funds -->
                        <tr>
                            <td class="hide-for-small" data-bind="text: Number"></td>
                            <td data-bind="text: Title"></td>
                            <td class="hide-for-small" data-bind="text: ResponsiblePerson"></td>
                            <td class="hide-for-small" data-bind="text: formattedCurrentBudget, css: { 'negative-value': CurrentBudget() < 0 }"></td>
                            <td class="hide-for-medium-down" data-bind="text: formattedProjectedExpenditures, css: { 'negative-value': ProjectedExpenditures() < 0 }"></td>
                            <td data-bind="text: formattedRequestedBudget, css: { 'negative-value': requestedBudget() < 0 }"></td>
                            <td class="hide-for-small" data-bind="text: formattedVariance, css: { 'negative-value': variance() < 0 }"></td>
                        </tr>
                        <!--/ko-->
                    </tbody>
                    <tbody class="hide-for-small" data-bind="if: Number() === 'O'">
                        <tr class="subtotal" data-bind="with: subtotals">
                            <td colspan="3" data-bind="text: 'Total for ' + $parent.Name()"></td>
                            <td data-bind="text: formattedCurrentBudget, css: { 'negative-value': currentBudget() < 0 }"></td>
                            <td class="hide-for-medium-down" data-bind="text: formattedProjectedExpenditures, css: { 'negative-value': projectedExpenditures() < 0 }"></td>
                            <td data-bind="text: formattedRequestedBudget, css: { 'negative-value': requestedBudget() < 0 }"></td>
                            <td data-bind="text: formattedVariance, css: { 'negative-value': variance() < 0 }"></td>
                        </tr>
                    </tbody>
                    <!--/ko-->
                </table>
            </div>
        </div>
    </div>
</div>

